!function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t){class a{constructor(){this.api="eaf59a06684b739431331d13cc75060d",this.header={method:"GET",headers:{"user-key":this.api,"Content-Type":"application/json"},credentials:"same-origin"}}async searchAPI(e,t){const a="https://developers.zomato.com/api/v2.1/cities?="+e,s=await fetch("https://developers.zomato.com/api/v2.1/categories",this.header),n=await s.json(),r=await n.categories,o=await fetch(a,this.header),i=await o.json(),c=await i.location_suggestions;let d;if(c.length>0)return await c[0].id;const l=`https://developers.zomato.com/api/v2.1/search?entity_id=${d}&entity_type=city&category=${t}&sort=rating`,u=await fetch(l,this.header),h=await u.json();return{categories:r,cityID:d,restaurants:await h.restaurants}}}class s{constructor(){this.loader=document.querySelector(".loader"),this.restaurantList=document.getElementById("restaurant-list")}addSelectOptions(e){const t=document.getElementById("searchCategory");let a="<option value='0' selected>Select category</option>";e.forEach(e=>{a+=`<option value='${e.categories.id}'>${e.categories.name}</option>`}),t.innerHTML=a}showFeedback(e){const t=document.querySelector(".feedback");t.classList.add("showItem"),t.innerHTML=`<p>${e}</p>`,setTimeout(()=>{t.classList.remove("showItem")},3e3)}showLoader(){this.loader.classList.add("showItem")}hideLoader(){this.loader.classList.remove("showItem")}getRestaurants(e){this.hideLoader(),0===e.length?this.showFeedback("No such categories exist in the selected city"):(this.restaurantList.innerHTML="",e.forEach(e=>{const{thumb:t,name:a,location:{address:s},user_rating:{aggregate_rating:n},cuisines:r,average_cost_for_two:o,menu_url:i,url:c}=e.restaurant;""!==t&&this.showRestaurant(t,a,s,n,r,o,i,c)}))}showRestaurant(e,t,a,s,n,r,o,i){const c=document.createElement("div");c.classList.add("col-11","mx-auto","my-3","col-md-4"),c.innerHTML=`\n        <div class="card">\n         <div class="card">\n          <div class="row p-3">\n           <div class="col-5">\n            <img src="${e}" class="img-fluid img-thumbnail" alt="">\n           </div>\n           <div class="col-5 text-capitalize">\n            <h6 class="text-uppercase pt-2 redText">${t}</h6>\n            <p>${a}</p>\n           </div>\n           <div class="col-1">\n            <div class="badge badge-success">\n             ${s}\n            </div>\n           </div>\n          </div>\n          <hr>\n          <div class="row py-3 ml-1">\n           <div class="col-5 text-uppercase ">\n            <p>cuisines : </p>\n            <p>cost for two :</p>\n           </div>\n           <div class="col-7 text-uppercase">\n            <p>${n}</p>\n            <p>${r}</p>\n           </div>\n          </div>\n          <hr>\n          <div class="row text-center no-gutters pb-3">\n           <div class="col-6">\n            <a href="${o}" target="_blank" class="btn redBtn  text-uppercase"><i class="fas fa-book"></i> menu</a>\n           </div>\n           <div class="col-6">\n            <a href="${i}" target="_blank" class="btn redBtn  text-uppercase"><i class="fas fa-book"></i>website</a>\n           </div>\n          </div>\n         </div>\n        \n        `,this.restaurantList.appendChild(c)}}!function(){const e=document.getElementById("searchForm"),t=document.getElementById("searchCity"),n=document.getElementById("searchCategory"),r=new a,o=new s;document.addEventListener("DOMContentLoaded",()=>{r.searchAPI().then(e=>o.addSelectOptions(e.categories))}),e.addEventListener("submit",e=>{e.preventDefault();const a=t.value.toLowerCase(),s=parseInt(n.value);""===a||0===s?o.showFeedback("Please enter City and Select Category"):r.searchAPI(a).then(e=>{0===e.cityID?o.showFeedback("Please enter a valid city"):(o.showLoader(),r.searchAPI(a,s).then(e=>{o.getRestaurants(e.restaurants)}))})})}()}]);